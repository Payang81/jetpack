var cookieLib={getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,o,a,n,c){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(o)switch(o.constructor){case Number:s=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:s="; expires="+o;break;case Date:s="; expires="+o.toUTCString()}return"rootDomain"!==n&&".rootDomain"!==n||(n=(".rootDomain"===n?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(n?"; domain="+n:"")+(a?"; path="+a:"")+(c?"; secure":""),!0}},setDefaultOptInCookie=function(){var e=".wordpress.com"===location.hostname.slice(-14)?".rootDomain":location.hostname;cookieLib.setItem("usprivacy","<?php echo esc_js( self::get_optin_cookie_string() ); ?>",31536e3,"/",e)},setCcpaAppliesCookie=function(e){var t=".wordpress.com"===location.hostname.slice(-14)?".rootDomain":location.hostname;cookieLib.setItem("ccpa_applies",e,86400,"/",t)},destroyModal=function(){var e=document.querySelector("#ccpa-modal");e&&e.parentElement.removeChild(e)},injectModal=function(){destroyModal();var e=new XMLHttpRequest;e.open("GET","/wp-admin/admin-ajax.php?action=privacy_optout_markup",!0),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=document.createElement("div");document.body.insertBefore(e,document.body.firstElementChild),e.outerHTML=this.response,document.querySelector("#ccpa-modal .opt-out").addEventListener("click",function(e){var t=new XMLHttpRequest;t.open("POST","/wp-admin/admin-ajax.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.response);t&&t.success&&(t.data?e.target.parentNode.classList.add("is-checked"):e.target.parentNode.classList.remove("is-checked"))}},t.send("action=privacy_optout&optout="+e.target.checked)});var t=cookieLib.getItem("usprivacy"),o=t&&"Y"===t[2],a=document.querySelector("#ccpa-modal .opt-out");a.checked=o,o&&a.parentNode.classList.add("is-checked");var n=document.querySelectorAll("#ccpa-modal .components-button");Array.prototype.forEach.call(n,function(e){e.addEventListener("click",function(){destroyModal()})})}},e.send()},doNotSellCallback=function(){var e=document.querySelector(".ccpa-do-not-sell");return e&&(e.addEventListener("click",function(e){e.preventDefault();var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="wp-content/plugins/jetpack/modules/wordads/css/cleanslate.css",document.getElementsByTagName("HEAD")[0].appendChild(t);var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href="wp-content/plugins/jetpack/modules/wordads/css/wordads-ccpa.min.css",document.getElementsByTagName("HEAD")[0].appendChild(o),injectModal()}),e.style.display=""),!0};document.addEventListener("DOMContentLoaded",function(){if(null===cookieLib.getItem("usprivacy")){var e=cookieLib.getItem("ccpa_applies");if(null===e){var t=new XMLHttpRequest;t.open("GET","https://public-api.wordpress.com/geo/",!0),t.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=JSON.parse(this.response),t=e.region&&"california"===e.region.toLowerCase();setCcpaAppliesCookie(t),t&&doNotSellCallback()&&setDefaultOptInCookie()}else setCcpaAppliesCookie(!0),doNotSellCallback()&&setDefaultOptInCookie()},t.send()}else"true"===e&&doNotSellCallback()&&setDefaultOptInCookie()}else doNotSellCallback()});
